# تعليمات للمصمم — STAGE_6_FIELD_TRACKING

## 0) أولوية اللغة
- العربية أولًا في كل العناصر.
- لا تُكسَر العربية عند إضافة الإنجليزية لاحقًا.

## 1) شريط السياق (Context Bar) إلزامي
في أعلى كل صفحة ضمن هذا المسار:
- الشركة (org)
- الفرع (branch)
- الصفة (persona)

## 2) فلسفة المسار
- لا يوجد تتبع مستمر.
- كل موقع يجب أن يكون مرتبطًا بعمل/مهمة.
- الهدف: **دليل إداري/قانوني** وليس مراقبة.

## 3) صفحات موصى بها
استخدم ملف `PAGE_CONTRACTS.md` كأساس.

### (أ) Field Dashboard
- بطاقات (Cards) لأهم المؤشرات.
- لا تعرض أي زر إذا الصلاحية غير موجودة.

### (ب) Check-ins List
- فلاتر: المستخدم، من/إلى، نوع السجل، task_id.
- سطر السجل:
  - التاريخ/الوقت
  - kind
  - task_id / project_id
  - ملاحظة مختصرة
  - رابط عرض تفاصيل

### (ج) Task Runs
- Active Runs تظهر في الأعلى.
- زر Start/End يظهر فقط مع `field:taskrun:create`.

## 4) النماذج (Forms) — حقول مطلوبة
### إنشاء Check-in
- kind (إجباري)
- task_id (مستحسن بشدة)
- lat/lng (إن توفر)
- note (اختياري)
- photo (اختياري) عبر documents

**أخطاء متوقعة:**
- `MODE_NOT_SUPPORTED`
- `GEOFENCE_VIOLATION`
- `PHOTOS_DISABLED`

### Start Task Run
- task_id (إجباري)
- project_id (اختياري)

### End Task Run
- id (إجباري)
- status (DONE/CANCELED)

## 5) قواعد الظهور حسب الصلاحيات
- لا تستخدم "disable" للأزرار؛ اخفِ العنصر بالكامل.
- كل endpoint مرتبط بـ Permission key واحد على الأقل.

## 6) طباعة/تصدير (لاحقًا)
- أي تقرير مطبوع يجب أن يحمل الصفة والفرع بشكل ظاهر.
- أي اعتماد/رفض (إن أضيف لاحقًا) يجب أن يطلب سبب.
